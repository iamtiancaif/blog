---
layout: post
title:  "Spring Boot and WebSocket example without STOMP and SockJs"
categories: computer
tags:  computer copy java websocket
author: "Dhiraj Ray"
source: "https://www.devglan.com/spring-boot/spring-websocket-integration-example-without-stomp"
---

* content
{:toc}


You can find many examples available on the web for spring websocket integration but most of them are using some messaging protocol like STOMP. Though Spring provides STOMP support out of the box but use of any messaging protocol to connect to websocket is not mandatory. You can use raw websocket by defining your own messaging protocol to connect to spring websocket using TextWebSocketHandler. In this post we will be creating a websocket connection using Spring but without STOMP and SockJs.  

  

If you are looking for spring websocket example with STOMP and Spring Security, then visit here [spring websocket example with STOMP](http://www.devglan.com/spring-boot/spring-boot-websocket-integration-example) or else here is an example of [Spring boot websocket angular example](http://www.devglan.com/spring-boot/spring-boot-angular-websocket)

What is STOMP
-------------

STOMP stands for Streaming Text Oriented Messaging Protocol. As per [wiki](http://en.wikipedia.org/wiki/Streaming_Text_Oriented_Messaging_Protocol), STOMP is a simple text-based protocol, designed for working with message-oriented middleware (MOM). It provides an interoperable wire format that allows STOMP clients to talk with any message broker supporting the protocol.

This means when we do not have STOMP as a client, the message sent lacks of information to make Spring route it to a specific message handler method. So, if we could create a mechanism that can make Spring to route to a specific message handler then probably we can make websocket connection without STOMP.

Custom WebSocketHandler
-----------------------

We concluded that if we do not want to use STOMP, then we have to define our custom message protocol handler that should handle all the messages coming from any websocket client. Before defining any custom message handler class, we need to identify what format of message our handler class expect from the client. It can be either XML or Json or of any other format.

In this example we assume that the websocket client will be communicating with the server in JSON. Hence our handler will be a JSON message handler and we can define this in Spring by extending TextWebSocketHandler.java

TextWebSocketHandler
--------------------

TextWebSocketHandler is a class in Spring library that extends AbstractWebSockethandler class and primarily meant for handling only text messages. So, if you are expecting any binary messages from your websocket client then defining your custom handler class by extending TextWebSocketHandler is of no use as binary messages will be rejected with CloseStatus.NOT_ACCEPTABLE.

Implementation of Spring Websocket without STOMP
------------------------------------------------

While coming to the code implementation, we will be creating a simple web app using Spring websocket where message transfer between the client and server will happen via websocket without STOMP. Let us start by defining our project structure.

Project Structure
-----------------

![spring-boot-websocket-without-stomp-project-structure](data:image;base64,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) 

<!--more-->  


Maven Dependency
----------------

pom.xml

<properties>
	<tomcat.version>8.0.3</tomcat.version>
</properties>

<parent>
	<groupId>org.springframework.boot</groupId>
	<artifactId>spring-boot-starter-parent</artifactId>
	<version>1.3.3.RELEASE</version>
</parent>

<dependencies>
	<dependency>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-websocket</artifactId>
	</dependency>
	<dependency>
		<groupId>com.google.code.gson</groupId>
		<artifactId>gson</artifactId>
	</dependency>
<build>
		<plugins>
			<plugin>
				<groupId>org.springframework.boot</groupId>
				<artifactId>spring-boot-maven-plugin</artifactId>
			</plugin>
		</plugins>
	</build>
	
</dependencies>

Server Side Implementation
--------------------------

Let us start by defining `Applicaton.java`.

@SpringBootApplication: This is a convenience annotation that is equivalent to declaring `@Configuration`,`@EnableAutoConfiguration `and `@ComponentScan`.

Application.java

package com.devglan.config;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.context.web.SpringBootServletInitializer;

@SpringBootApplication
public class Application extends SpringBootServletInitializer {
	
	 private static Class applicationClass = Application.class;

    public static void main(String\[\] args) {
        SpringApplication.run(Application.class, args);
    }

} 

Overriding TextWebSocketHandler
-------------------------------

Now let us define our custom handler class by extending `TextWebSocketHandler.java` that will override the protocol to handle the text message. Our handler will be capable of handling Json message. This class records all the session once any websocket connection is established and broadcasts the message to all the sessions once any message is received.

Instead of broadcasting message to all the clients, you can also configure to send message to a particular session. This configuration is also explained in coming section.

SocketHandler.class

package com.devglan.config;
import org.springframework.stereotype.Component;
import org.springframework.web.socket.TextMessage;
import org.springframework.web.socket.WebSocketSession;
import org.springframework.web.socket.handler.TextWebSocketHandler;

@Component
public class SocketHandler extends TextWebSocketHandler {
	
	List sessions = new CopyOnWriteArrayList<>();

	@Override
	public void handleTextMessage(WebSocketSession session, TextMessage message)
			throws InterruptedException, IOException {
		
		for(WebSocketSession webSocketSession : sessions) {
			Map value = new Gson().fromJson(message.getPayload(), Map.class);
			webSocketSession.sendMessage(new TextMessage("Hello " + value.get("name") + " !"));
		}
	}

	@Override
	public void afterConnectionEstablished(WebSocketSession session) throws Exception {
		//the messages will be broadcasted to all users.
		sessions.add(session);
	}
} 

Other Interesting Posts
[Maintaining Spring Session during Websocket Connection](http://www.devglan.com/spring-boot/spring-session-stomp-websocket)
[Spring Boot Websocket Example with STOMP](http://www.devglan.com/spring-boot/spring-boot-websocket-integration-example)
[Spring Boot JMS ActiveMQ Example](http://www.devglan.com/spring-boot/spring-boot-jms-activemq-example)
[Spring Boot Actuator](http://www.devglan.com/spring-boot/spring-boot-actuator-tutorial-guide)
[Spring Boot Spring MVC Example](http://www.devglan.com/spring-boot/spring-boot-mvc-example)
[Spring Boot Security Password Encoding using Bcrypt Encoder](http://www.devglan.com/spring-security/spring-boot-security-password-encoding-bcrypt-encoder)

Spring Web Socket Configurations
--------------------------------

Now let us define our websocket configurations. The below configuration will register websocket handler at `/name` and define our custom handler class that will handle all the messages from the websocket client.

WebSocketConfig.class

package com.devglan.config;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.socket.config.annotation.EnableWebSocket;
import org.springframework.web.socket.config.annotation.WebSocketConfigurer;
import org.springframework.web.socket.config.annotation.WebSocketHandlerRegistry;

@Configuration
@EnableWebSocket
public class WebSocketConfig implements WebSocketConfigurer {
	public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {
		registry.addHandler(new SocketHandler(), "/name");
	}
}

This is it for server side. Now let's jump to client side code.

app.js

Here we have defined 3 methods each for creating websocket connection when user clicks on connect button, sending message to the server once send button is clicked and another for listening the server response that will come from the server.

function connect() {
	ws = new WebSocket('ws://localhost:8080/name');
	ws.onmessage = function(data){
		showGreeting(data.data);
	}
	 setConnected(true);
}

function disconnect() {
    if (ws != null) {
        ws.close();
    }
    setConnected(false);
    console.log("Disconnected");
}

function sendName() {
    ws.send($("#name").val());
}

function showGreeting(message) {
    $("#greetings").append(" " + message + "");
}

Run Application
---------------

1\. Run Application.java as a java application and the main method will execute.

2\. In the browser make request at [http:localhost:8080](https://www.devglan.com/).

3\. Create websocket connection by clicking connect button and enter the name and click on send.

4\. The handler class at server side will handle the message and return the greeting message as a response which will be shown in the browser as below:

![web-socket-example](data:image;base64,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)

Sending Message to Single Session
---------------------------------

Above implementation will broadcast message to all the sessions and hence all the client will receive the messaage at a time. To send message to a single client we need to tweak our `Sockethandler.java` as below. SocketHandler.java

package com.devglan.config;
import org.springframework.stereotype.Component;
import org.springframework.web.socket.TextMessage;
import org.springframework.web.socket.WebSocketSession;
import org.springframework.web.socket.handler.TextWebSocketHandler;

@Component
public class SocketHandler extends TextWebSocketHandler {
	
	List sessions = new CopyOnWriteArrayList<>();

	@Override
	public void handleTextMessage(WebSocketSession session, TextMessage message)
			throws InterruptedException, IOException {
		Map value = new Gson().fromJson(message.getPayload(), Map.class);
		/*for(WebSocketSession webSocketSession : sessions) {
			Map value = new Gson().fromJson(message.getPayload(), Map.class);
			webSocketSession.sendMessage(new TextMessage("Hello " + value.get("name") + " !"));
		}*/
		session.sendMessage(new TextMessage("Hello " \+ value.get("name") \+ " !"));
	}

	@Override
	public void afterConnectionEstablished(WebSocketSession session) throws Exception {
		//the messages will be broadcasted to all users.
		sessions.add(session);
	}
} 

This change in SocketHandler.java will ensure that the message is sent to a single session.

Conclusion
----------

I hope this article served you that you were looking for. If you have anything that you want to add or share then please share it below in the comment section.

[

### Download the source

](https://www.devglan.com/)

1. [Spring Boot Angular Websocket](https://www.devglan.com/spring-boot/spring-boot-angular-websocket)

2. [Spring Boot Websocket Integration Example](https://www.devglan.com/spring-boot/spring-boot-websocket-integration-example)

3. [Spring Session Stomp Websocket](https://www.devglan.com/spring-boot/spring-session-stomp-websocket)

4. [Spring 5 Features And Enhancements](https://www.devglan.com/spring-mvc/spring-5-features-and-enhancements)

5. [Spring Boot Mvc Example](https://www.devglan.com/spring-boot/spring-boot-mvc-example)









